%%
%% Quick & dirty mix of Z and OZ (z-eves.sty + oz.sty)
%% seems to work (but not very well)...
%% Maciej 'Codematic' Mochol - 08.2002
%% code@code.pl
%%
%% Important notes:
%% -> axdef inside a class should be named: ozaxdef
%%

%% Z/EVES style file
%%
%% A modified version of zed-csp.sty, plus some extra definitions for
%% Z/LaTeX.

% >>> zed-csp.sty <<< 
%
% (c) Jim Davies, January 1995

% You may copy and distribute this file freely.  Any queries and
% complaints should be forwarded to Jim.Davies@comlab.ox.ac.uk.

% If you make any changes to this file, please do not distribute
% the results under the name `zed-csp.sty'.  

% >>> information <<<

% This is a LaTeX2e package for typesetting Z and CSP notation.  It
% employs the standard (JMS) set of macros, but uses the AMS fonts in
% place of `oxsy'.  You will need the tfm and fd files for the `A' and
% `B' symbol fonts installed.  This requires (1) the AMSFONTS package
% and (2) the MFNFSS package for LaTeX2e.  

% If you have the Lucida Bright font set from Y&Y, then you can use
% that instead.  In this case, you have only to load `lucbr' (from the
% PSNFSS package) before `zed-csp'.  

% >>> changes <<<

% version 0  (Sep 94): first attempt
% version 0a (Oct 94): fixed error in definition of \cat
% version 0b (Nov 94): added composite for \uminus 
% version 0c (Jan 95): removed definition of \emptyset 

% >>> date and version <<<

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{code-z}[97/09/18]

% >>> fonts and symbols <<<

% We declare a new math version.  For convenience, I have chosen the
% same name as that used in oz.sty.  The following code is based upon
% the work of Paul King, Sebastian Rahtz, and Mike Spivey.  Alan
% Jeffrey's influence is everywhere. 

\@ifpackageloaded{lucbr}{}{%
  \DeclareMathVersion{zed}
  \SetMathAlphabet{\mathrm}{zed}{\encodingdefault}{\rmdefault}{m}{n}%
  \SetMathAlphabet{\mathbf}{zed}{\encodingdefault}{\rmdefault}{bx}{n}%
  \SetMathAlphabet{\mathsf}{zed}{\encodingdefault}{\sfdefault}{m}{n}%
  \DeclareSymbolFont{italics}{\encodingdefault}{\rmdefault}{m}{it}%
  \DeclareSymbolFontAlphabet{\mathrm}{operators}
  \DeclareSymbolFontAlphabet{\mathit}{letters}
  \DeclareSymbolFontAlphabet{\mathcal}{symbols}
  \DeclareSymbolFontAlphabet{\zedit}{italics}
  \DeclareSymbolFont{lasy}{U}{lasy}{m}{n}
  \DeclareSymbolFont{AMSa}{U}{msa}{m}{n}
  \DeclareSymbolFont{AMSb}{U}{msb}{m}{n}
  \let\mho\undefined
  \let\Join\undefined
  \let\Box\undefined
  \let\Diamond\undefined
  \let\leadsto\undefined
  \let\sqsubset\undefined
  \let\sqsupset\undefined
  \let\lhd\undefined
  \let\unlhd\undefined
  \let\rhd\undefined
  \let\unrhd\undefined
  \DeclareMathSymbol{\mho}{\mathord}{lasy}{"30}
  \DeclareMathSymbol{\Join}{\mathrel}{lasy}{"31}
  \DeclareMathSymbol{\Box}{\mathord}{lasy}{"32}
  \DeclareMathSymbol{\Diamond}{\mathord}{lasy}{"33}
  \DeclareMathSymbol{\leadsto}{\mathrel}{lasy}{"3B}
  \DeclareMathSymbol{\sqsubset}{\mathrel}{lasy}{"3C}
  \DeclareMathSymbol{\sqsupset}{\mathrel}{lasy}{"3D}
  \DeclareMathSymbol{\lhd}{\mathrel}{lasy}{"01}
  \DeclareMathSymbol{\unlhd}{\mathrel}{lasy}{"02}
  \DeclareMathSymbol{\rhd}{\mathrel}{lasy}{"03}
  \DeclareMathSymbol{\unrhd}{\mathrel}{lasy}{"04}
  \DeclareSymbolFontAlphabet{\bbold}{AMSb}
  \mathversion{zed}
  }

\@ifpackageloaded{lucbr}{%
  \DeclareMathSymbol{\doublebarwedge}{\mathbin}{symbols}{"D4}
  \DeclareMathSymbol{\lll}{\mathrel}{letters}{"DE}
  \DeclareMathSymbol{\ggg}{\mathrel}{letters}{"DF} 
  \DeclareMathSymbol{\eth}{\mathrel}{operators}{"F0}
  }{%
  \let\rightleftharpoons\undefined
  \let\angle\undefined
  \DeclareMathSymbol\boxdot{\mathbin}{AMSa}{"00}
  \DeclareMathSymbol\boxplus{\mathbin}{AMSa}{"01}
  \DeclareMathSymbol\boxtimes{\mathbin}{AMSa}{"02}
  \DeclareMathSymbol\square{\mathord}{AMSa}{"03}
  \DeclareMathSymbol\blacksquare{\mathord}{AMSa}{"04}
  \DeclareMathSymbol\centerdot{\mathbin}{AMSa}{"05}
  \DeclareMathSymbol\lozenge{\mathord}{AMSa}{"06}
  \DeclareMathSymbol\blacklozenge{\mathord}{AMSa}{"07}
  \DeclareMathSymbol\circlearrowright{\mathrel}{AMSa}{"08}
  \DeclareMathSymbol\circlearrowleft{\mathrel}{AMSa}{"09}
  \DeclareMathSymbol\rightleftharpoons{\mathrel}{AMSa}{"0A}
  \DeclareMathSymbol\leftrightharpoons{\mathrel}{AMSa}{"0B}
  \DeclareMathSymbol\boxminus{\mathbin}{AMSa}{"0C}
  \DeclareMathSymbol\Vdash{\mathrel}{AMSa}{"0D}
  \DeclareMathSymbol\Vvdash{\mathrel}{AMSa}{"0E}
  \DeclareMathSymbol\vDash{\mathrel}{AMSa}{"0F}
  \DeclareMathSymbol\twoheadrightarrow{\mathrel}{AMSa}{"10}
  \DeclareMathSymbol\twoheadleftarrow{\mathrel}{AMSa}{"11}
  \DeclareMathSymbol\leftleftarrows{\mathrel}{AMSa}{"12}
  \DeclareMathSymbol\rightrightarrows{\mathrel}{AMSa}{"13}
  \DeclareMathSymbol\upuparrows{\mathrel}{AMSa}{"14}
  \DeclareMathSymbol\downdownarrows{\mathrel}{AMSa}{"15}
  \DeclareMathSymbol\upharpoonright{\mathrel}{AMSa}{"16}
  \DeclareMathSymbol\downharpoonright{\mathrel}{AMSa}{"17}
  \DeclareMathSymbol\upharpoonleft{\mathrel}{AMSa}{"18}
  \DeclareMathSymbol\downharpoonleft{\mathrel}{AMSa}{"19}
  \DeclareMathSymbol\rightarrowtail{\mathrel}{AMSa}{"1A}
  \DeclareMathSymbol\leftarrowtail{\mathrel}{AMSa}{"1B}
  \DeclareMathSymbol\leftrightarrows{\mathrel}{AMSa}{"1C}
  \DeclareMathSymbol\rightleftarrows{\mathrel}{AMSa}{"1D}
  \DeclareMathSymbol\Lsh{\mathrel}{AMSa}{"1E}
  \DeclareMathSymbol\Rsh{\mathrel}{AMSa}{"1F}
  \DeclareMathSymbol\rightsquigarrow{\mathrel}{AMSa}{"20}
  \DeclareMathSymbol\leftrightsquigarrow{\mathrel}{AMSa}{"21}
  \DeclareMathSymbol\looparrowleft{\mathrel}{AMSa}{"22}
  \DeclareMathSymbol\looparrowright{\mathrel}{AMSa}{"23}
  \DeclareMathSymbol\circeq{\mathrel}{AMSa}{"24}
  \DeclareMathSymbol\succsim{\mathrel}{AMSa}{"25}
  \DeclareMathSymbol\gtrsim{\mathrel}{AMSa}{"26}
  \DeclareMathSymbol\gtrapprox{\mathrel}{AMSa}{"27}
  \DeclareMathSymbol\multimap{\mathrel}{AMSa}{"28}
  \DeclareMathSymbol\therefore{\mathrel}{AMSa}{"29}
  \DeclareMathSymbol\because{\mathrel}{AMSa}{"2A}
  \DeclareMathSymbol\doteqdot{\mathrel}{AMSa}{"2B}
  \DeclareMathSymbol\triangleq{\mathrel}{AMSa}{"2C}
  \DeclareMathSymbol\precsim{\mathrel}{AMSa}{"2D}
  \DeclareMathSymbol\lesssim{\mathrel}{AMSa}{"2E}
  \DeclareMathSymbol\lessapprox{\mathrel}{AMSa}{"2F}
  \DeclareMathSymbol\eqslantless{\mathrel}{AMSa}{"30}
  \DeclareMathSymbol\eqslantgtr{\mathrel}{AMSa}{"31}
  \DeclareMathSymbol\curlyeqprec{\mathrel}{AMSa}{"32}
  \DeclareMathSymbol\curlyeqsucc{\mathrel}{AMSa}{"33}
  \DeclareMathSymbol\preccurlyeq{\mathrel}{AMSa}{"34}
  \DeclareMathSymbol\leqq{\mathrel}{AMSa}{"35}
  \DeclareMathSymbol\leqslant{\mathrel}{AMSa}{"36}
  \DeclareMathSymbol\lessgtr{\mathrel}{AMSa}{"37}
  \DeclareMathSymbol\backprime{\mathord}{AMSa}{"38}
  \DeclareMathSymbol\risingdotseq{\mathrel}{AMSa}{"3A}
  \DeclareMathSymbol\fallingdotseq{\mathrel}{AMSa}{"3B}
  \DeclareMathSymbol\succcurlyeq{\mathrel}{AMSa}{"3C}
  \DeclareMathSymbol\geqq{\mathrel}{AMSa}{"3D}
  \DeclareMathSymbol\geqslant{\mathrel}{AMSa}{"3E}
  \DeclareMathSymbol\gtrless{\mathrel}{AMSa}{"3F}
  \DeclareMathSymbol\sqsubset{\mathrel}{AMSa}{"40}
  \DeclareMathSymbol\sqsupset{\mathrel}{AMSa}{"41}
  \DeclareMathSymbol\vartriangleright{\mathrel}{AMSa}{"42}
  \DeclareMathSymbol\vartriangleleft{\mathrel}{AMSa}{"43}
  \DeclareMathSymbol\trianglerighteq{\mathrel}{AMSa}{"44}
  \DeclareMathSymbol\trianglelefteq{\mathrel}{AMSa}{"45}
  \DeclareMathSymbol\bigstar{\mathord}{AMSa}{"46}
  \DeclareMathSymbol\between{\mathrel}{AMSa}{"47}
  \DeclareMathSymbol\blacktriangledown{\mathord}{AMSa}{"48}
  \DeclareMathSymbol\blacktriangleright{\mathrel}{AMSa}{"49}
  \DeclareMathSymbol\blacktriangleleft{\mathrel}{AMSa}{"4A}
  \DeclareMathSymbol\vartriangle{\mathord}{AMSa}{"4D}
  \DeclareMathSymbol\blacktriangle{\mathord}{AMSa}{"4E}
  \DeclareMathSymbol\triangledown{\mathord}{AMSa}{"4F}
  \DeclareMathSymbol\eqcirc{\mathrel}{AMSa}{"50}
  \DeclareMathSymbol\lesseqgtr{\mathrel}{AMSa}{"51}
  \DeclareMathSymbol\gtreqless{\mathrel}{AMSa}{"52}
  \DeclareMathSymbol\lesseqqgtr{\mathrel}{AMSa}{"53}
  \DeclareMathSymbol\gtreqqless{\mathrel}{AMSa}{"54}
  \DeclareMathSymbol\Rrightarrow{\mathrel}{AMSa}{"56}
  \DeclareMathSymbol\Lleftarrow{\mathrel}{AMSa}{"57}
  \DeclareMathSymbol\veebar{\mathbin}{AMSa}{"59}
  \DeclareMathSymbol\barwedge{\mathbin}{AMSa}{"5A}
  \DeclareMathSymbol\doublebarwedge{\mathbin}{AMSa}{"5B}
  \DeclareMathSymbol\angle{\mathord}{AMSa}{"5C}
  \DeclareMathSymbol\measuredangle{\mathord}{AMSa}{"5D}
  \DeclareMathSymbol\sphericalangle{\mathord}{AMSa}{"5E}
  \DeclareMathSymbol\varpropto{\mathrel}{AMSa}{"5F}
  \DeclareMathSymbol\smallsmile{\mathrel}{AMSa}{"60}
  \DeclareMathSymbol\smallfrown{\mathrel}{AMSa}{"61}
  \DeclareMathSymbol\Subset{\mathrel}{AMSa}{"62}
  \DeclareMathSymbol\Supset{\mathrel}{AMSa}{"63}
  \DeclareMathSymbol\Cup{\mathbin}{AMSa}{"64}
  \DeclareMathSymbol\Cap{\mathbin}{AMSa}{"65}
  \DeclareMathSymbol\curlywedge{\mathbin}{AMSa}{"66}
  \DeclareMathSymbol\curlyvee{\mathbin}{AMSa}{"67}
  \DeclareMathSymbol\leftthreetimes{\mathbin}{AMSa}{"68}
  \DeclareMathSymbol\rightthreetimes{\mathbin}{AMSa}{"69}
  \DeclareMathSymbol\subseteqq{\mathrel}{AMSa}{"6A}
  \DeclareMathSymbol\supseteqq{\mathrel}{AMSa}{"6B}
  \DeclareMathSymbol\bumpeq{\mathrel}{AMSa}{"6C}
  \DeclareMathSymbol\Bumpeq{\mathrel}{AMSa}{"6D}
  \DeclareMathSymbol\lll{\mathrel}{AMSa}{"6E}
  \DeclareMathSymbol\ggg{\mathrel}{AMSa}{"6F}
  \DeclareMathDelimiter\ulcorner{4}{AMSa}{"70}{AMSa}{"70}
  \DeclareMathDelimiter\urcorner{5}{AMSa}{"71}{AMSa}{"71}
  \DeclareMathDelimiter\llcorner{4}{AMSa}{"78}{AMSa}{"78}
  \DeclareMathDelimiter\lrcorner{5}{AMSa}{"79}{AMSa}{"79}
  \xdef\yen      {\noexpand\mathhexbox\hexnumber@\symAMSa 55 }
  \xdef\checkmark{\noexpand\mathhexbox\hexnumber@\symAMSa 58 }
  \xdef\circledR {\noexpand\mathhexbox\hexnumber@\symAMSa 72 }
  \xdef\maltese  {\noexpand\mathhexbox\hexnumber@\symAMSa 7A }
  \DeclareMathSymbol\circledS{\mathord}{AMSa}{"73}
  \DeclareMathSymbol\pitchfork{\mathrel}{AMSa}{"74}
  \DeclareMathSymbol\dotplus{\mathbin}{AMSa}{"75}
  \DeclareMathSymbol\backsim{\mathrel}{AMSa}{"76}
  \DeclareMathSymbol\backsimeq{\mathrel}{AMSa}{"77}
  \DeclareMathSymbol\complement{\mathord}{AMSa}{"7B}
  \DeclareMathSymbol\intercal{\mathbin}{AMSa}{"7C}
  \DeclareMathSymbol\circledcirc{\mathbin}{AMSa}{"7D}
  \DeclareMathSymbol\circledast{\mathbin}{AMSa}{"7E}
  \DeclareMathSymbol\circleddash{\mathbin}{AMSa}{"7F}
  \DeclareMathSymbol\lvertneqq{\mathrel}{AMSb}{"00}
  \DeclareMathSymbol\gvertneqq{\mathrel}{AMSb}{"01}
  \DeclareMathSymbol\nleq{\mathrel}{AMSb}{"02}
  \DeclareMathSymbol\ngeq{\mathrel}{AMSb}{"03}
  \DeclareMathSymbol\nless{\mathrel}{AMSb}{"04}
  \DeclareMathSymbol\ngtr{\mathrel}{AMSb}{"05}
  \DeclareMathSymbol\nprec{\mathrel}{AMSb}{"06}
  \DeclareMathSymbol\nsucc{\mathrel}{AMSb}{"07}
  \DeclareMathSymbol\lneqq{\mathrel}{AMSb}{"08}
  \DeclareMathSymbol\gneqq{\mathrel}{AMSb}{"09}
  \DeclareMathSymbol\nleqslant{\mathrel}{AMSb}{"0A}
  \DeclareMathSymbol\ngeqslant{\mathrel}{AMSb}{"0B}
  \DeclareMathSymbol\lneq{\mathrel}{AMSb}{"0C}
  \DeclareMathSymbol\gneq{\mathrel}{AMSb}{"0D}
  \DeclareMathSymbol\npreceq{\mathrel}{AMSb}{"0E}
  \DeclareMathSymbol\nsucceq{\mathrel}{AMSb}{"0F}
  \DeclareMathSymbol\precnsim{\mathrel}{AMSb}{"10}
  \DeclareMathSymbol\succnsim{\mathrel}{AMSb}{"11}
  \DeclareMathSymbol\lnsim{\mathrel}{AMSb}{"12}
  \DeclareMathSymbol\gnsim{\mathrel}{AMSb}{"13}
  \DeclareMathSymbol\nleqq{\mathrel}{AMSb}{"14}
  \DeclareMathSymbol\ngeqq{\mathrel}{AMSb}{"15}
  \DeclareMathSymbol\precneqq{\mathrel}{AMSb}{"16}
  \DeclareMathSymbol\succneqq{\mathrel}{AMSb}{"17}
  \DeclareMathSymbol\precnapprox{\mathrel}{AMSb}{"18}
  \DeclareMathSymbol\succnapprox{\mathrel}{AMSb}{"19}
  \DeclareMathSymbol\lnapprox{\mathrel}{AMSb}{"1A}
  \DeclareMathSymbol\gnapprox{\mathrel}{AMSb}{"1B}
  \DeclareMathSymbol\nsim{\mathrel}{AMSb}{"1C}
  \DeclareMathSymbol\ncong{\mathrel}{AMSb}{"1D}
  \DeclareMathSymbol\varsubsetneq{\mathrel}{AMSb}{"20} 
  \DeclareMathSymbol\varsupsetneq{\mathrel}{AMSb}{"21}
  \DeclareMathSymbol\nsubseteqq{\mathrel}{AMSb}{"22}
  \DeclareMathSymbol\nsupseteqq{\mathrel}{AMSb}{"23}
  \DeclareMathSymbol\subsetneqq{\mathrel}{AMSb}{"24}
  \DeclareMathSymbol\supsetneqq{\mathrel}{AMSb}{"25}
  \DeclareMathSymbol\varsubsetneqq{\mathrel}{AMSb}{"26}
  \DeclareMathSymbol\varsupsetneqq{\mathrel}{AMSb}{"27}
  \DeclareMathSymbol\subsetneq{\mathrel}{AMSb}{"28}
  \DeclareMathSymbol\supsetneq{\mathrel}{AMSb}{"29}
  \DeclareMathSymbol\nsubseteq{\mathrel}{AMSb}{"2A}
  \DeclareMathSymbol\nsupseteq{\mathrel}{AMSb}{"2B}
  \DeclareMathSymbol\nparallel{\mathrel}{AMSb}{"2C}
  \DeclareMathSymbol\nmid{\mathrel}{AMSb}{"2D}
  \DeclareMathSymbol\nshortmid{\mathrel}{AMSb}{"2E}
  \DeclareMathSymbol\nshortparallel{\mathrel}{AMSb}{"2F}
  \DeclareMathSymbol\nvdash{\mathrel}{AMSb}{"30}
  \DeclareMathSymbol\nVdash{\mathrel}{AMSb}{"31}
  \DeclareMathSymbol\nvDash{\mathrel}{AMSb}{"32}
  \DeclareMathSymbol\nVDash{\mathrel}{AMSb}{"33}
  \DeclareMathSymbol\ntrianglerighteq{\mathrel}{AMSb}{"34}
  \DeclareMathSymbol\ntrianglelefteq{\mathrel}{AMSb}{"35}
  \DeclareMathSymbol\ntriangleleft{\mathrel}{AMSb}{"36}
  \DeclareMathSymbol\ntriangleright{\mathrel}{AMSb}{"37}
  \DeclareMathSymbol\nleftarrow{\mathrel}{AMSb}{"38}
  \DeclareMathSymbol\nrightarrow{\mathrel}{AMSb}{"39}
  \DeclareMathSymbol\nLeftarrow{\mathrel}{AMSb}{"3A}
  \DeclareMathSymbol\nRightarrow{\mathrel}{AMSb}{"3B}
  \DeclareMathSymbol\nLeftrightarrow{\mathrel}{AMSb}{"3C}
  \DeclareMathSymbol\nleftrightarrow{\mathrel}{AMSb}{"3D}
  \DeclareMathSymbol\divideontimes{\mathbin}{AMSb}{"3E}
  \DeclareMathSymbol\varnothing{\mathord}{AMSb}{"3F}
  \DeclareMathSymbol\mho{\mathord}{AMSb}{"66}
  \DeclareMathSymbol\eth{\mathord}{AMSb}{"67}
  \DeclareMathSymbol\eqsim{\mathrel}{AMSb}{"68}
  \DeclareMathSymbol\beth{\mathord}{AMSb}{"69}
  \DeclareMathSymbol\gimel{\mathord}{AMSb}{"6A}
  \DeclareMathSymbol\daleth{\mathord}{AMSb}{"6B}
  \DeclareMathSymbol\lessdot{\mathrel}{AMSb}{"6C}
  \DeclareMathSymbol\gtrdot{\mathrel}{AMSb}{"6D}
  \DeclareMathSymbol\ltimes{\mathbin}{AMSb}{"6E}
  \DeclareMathSymbol\rtimes{\mathbin}{AMSb}{"6F}
  \DeclareMathSymbol\shortmid{\mathrel}{AMSb}{"70}
  \DeclareMathSymbol\shortparallel{\mathrel}{AMSb}{"71}
  \DeclareMathSymbol\smallsetminus{\mathbin}{AMSb}{"72}
  \DeclareMathSymbol\thicksim{\mathrel}{AMSb}{"73}
  \DeclareMathSymbol\thickapprox{\mathrel}{AMSb}{"74}
  \DeclareMathSymbol\approxeq{\mathrel}{AMSb}{"75}
  \DeclareMathSymbol\succapprox{\mathrel}{AMSb}{"76}
  \DeclareMathSymbol\precapprox{\mathrel}{AMSb}{"77}
  \DeclareMathSymbol\curvearrowleft{\mathrel}{AMSb}{"78}
  \DeclareMathSymbol\curvearrowright{\mathrel}{AMSb}{"79}
  \DeclareMathSymbol\digamma{\mathord}{AMSb}{"7A}
  \DeclareMathSymbol\varkappa{\mathord}{AMSb}{"7B}
  \DeclareMathSymbol\hslash{\mathord}{AMSb}{"7D}
  \DeclareMathSymbol\hbar{\mathord}{AMSb}{"7E}
  \DeclareMathSymbol\backepsilon{\mathrel}{AMSb}{"7F}
  }

% A macro name has been chosen for each of the symbols in the AMS
% fonts.  There is no need to load any other AMS package in order to
% access these symbols. 

% >>> fuzz <<<

% This is the standard fuzz setup, apart from the oz style change to
% the setmcodes macro. 

\def\@setmcodes#1#2#3{{\count0=#1 \count1=#3
    \loop \global\mathcode\count0=\count1 \ifnum \count0<#2
    \advance\count0 by1 \advance\count1 by1 \repeat}}
\@setmcodes{`A}{`Z}{"7\hexnumber@\symitalics41}% 
\@setmcodes{`a}{`z}{"7\hexnumber@\symitalics61}% 

\def荛骓盹溴墁苠祗遘疱钺祠芾蛙苕辇莒弭芾磴杰磲翳汨狎溴茼狒桡镤遴芑舰赴鞍茔狒泔溴嘬唤茚泗轹茜溴婊荏屙殂镬镱芑芾磴荏屙殂镬镱舰栋陈茕彐荏趄豸里穑丙茼狒栾瘥茼狒梵趄豸１茴镬轫轸簖茕彐苓莒遽鲥鲰镤荛骓盹溴苠祗遘脲蝾爱岸屙苕荟怙荑蝓戾鏖漪璋靛睚茼狒桡镤遴堍舰赴鞍茕彐芾膑雉澹雹荑怙荛１茔狒泔溴嘬⒔茚泗轹茜祜忉燔戾簪杰离黠翦茼狒桡栳蜾彐荏痫艚⒊舶茼狒桡镤遴芾杰箴雉茼狒桡镤遴茳杰黹茕彐茆篚穑苠篚瘥摞１茕彐荛铗屐１茼狒栩屐荃钿弪扉铄１茴鬻溟礤钴邃轭溴铘茭邃轭溴铘杰戾骠磲蜱轭楗茴鬻溟礤钴邃戾骠箦茭邃戾骠箦鸾卞恁茴鬻溟礤钴邃翎茭邃翎饨插恁茴鬻溟礤钴邃忉茭邃忉蚪跺恁茴鬻箅轲茭邃箅轲茭邃箅轲桨弟忉箦扉铄箅轲痨躞爱吵吵吵茆狍屐轭弩腴馥黹铛蟀吵吵吵茆狍屐轭弩腴馥茕彐茭邃箝妍茴鬻泔躅糗轭翦蝥邃扉铄疱钺祠荛铘弪邃扉铄疱钺祠奖鞍鞍茴鬻泔躅糗痱邂秫疱钺祠莛蝈怙疱钺祠桨茴鬻殒荛纡衾茭衾疰犰箦茕彐芾觑酐爱弟邃箅轲茕彐芾钺蝌秣茚漩犷沐莒轭鬻殇翳怡茭邃轭溴铘茕彐芾蝓戾骈祆莒遽溴蝮荑蝓戾桢殓梏茚蝌狴蝓戾鏖漪柢桄殪忑茕彐芾麸痨轭澹丙荑怙麸莒轭鬻殇翳荟蝓戾桢殓梏茚蝌狴蝓戾鏖漪鏖漪柢狎蜥蝓戾鏖漪荟蝓戾桢殓梏梆溴痿柢狸雉鏖漪璋痿荑怙麸茭邃戾骠箦瘥芾蝓戾骈祆荇栝铙疳沐１荇栝铙疳沐芾蝓戾骈祆茕彐芾邃扉铄茱黹荟蝓戾桢殓梏茚蝌狴蝓戾鏖漪鏖漪柢扉铄鏖漪茔螨茕彐荀桢蝈芾箅轲芾觑茱黹荟蝓戾桢殓梏茚蝌狴蝓戾鏖漪鏖漪柢邃忉茔芾箅轲芾觑酏茕彐茚祗稃茔蜚茴镝扉珙莛孱犰豉荛铘弪溟箴灬扉铄疱钺祠荟箅轲茭邃箅轲茕彐芾箅轲１茔蜚茱黹荟蝓戾桢殓梏１鏖漪柢狎蜥蝓戾鏖漪茔螨茕彐芾扉珙荇徕箅轲茭荔腴疖弼弪泸莒弭荇殄杰茕彐荇１茚骠弪狍箝珙礤铘芾糗泔躅衾剑饼茕彐芾酐荑箅轲茔秕铘儡邃翎恺茕彐芾箦酊箝妍莒弭茴屮艚芾铒磲翳茕彐芾铒磲翳＃丙荏腴鸢杰徕秭邃轶痨狴箅轲荏腴鸨杰忮祜麂轶痨狴箅轲茭邃箝莒弭芾铒磲翳杰铄茚怙鲥溟箴灬箅轲杰箅轲败忮祜麂轶痨狴箅轲杰箅轲饼茕彐芾邃荛骣盹溴芾戾狯弼盹溴苕い茜祜忉燔衾痿蝓芾箦酊箝茚漩犷沐莒轭鬻殇翳怡茭邃轭溴铘茚漩犷沐茕轶痨狴轭溴铘怡茭邃轭溴铘茕彐苘茔蜚螨王篝栳鲥茕彐犷铒莒弭骘铄篝邃犰殓铐孱趔莒弭莛狎杰蝈灬荇徕箅轲桨痿茕彐芾铒箅轲茱骀轭翦蜢轭弩腴苠鲥蝙泸禁茴镝扉珙荛纡衾茜祜忉燔衾疰犰箦荛驿轫莛蝈鲣屦翳经卑鞍痿荏腴鸢杰铒蝽犰忉箦扉铄箅轲茚漩犷沐荏腴鸢怡莛蝈鲣屦翳茚漩犷沐荏腴鸢怡荑糗篝蝓翕秫荛驿轫荏腴鸢架铒蝽犰扉铄箅轲扉黹荟箅轲茴矧磲祆轭弩腴苠祗荟箅轲荏腴鸢苕檐骈苠祗莛孱犰豉荛铘弪邃扉铄疱钺祠苕辇茕彐茭邃芾邃芾铒箅轲荑犰殓麸莒轭鬻殇翳茆珧秕荏趄豸ぼ历扉珙＃ぼ桄殪荇徕箅轲桨痿痨躞辨殪茔螨茕彐苠钿邃茔蜚蜍彗蝻躔い茜祜忉燔篱珙矧弭蝓妪茕彐苒茆彗轭珧秕疖邃茕彐茌茔蜚蜍彗蝻躔い苠钿珧秕疖殓铒蝈箴徙弩茕彐茚溴纣茕彐茚祗稃芾箅轲茭邃箅轲莛蝈溟箴灬疱钺祠杰痱邂秫疱钺祠芾邃芾铒箅轲荑犰殓麸莒轭鬻殇翳茆珧秕荏趄豸荟蝓戾鏖漪柢狎蜥蝓戾鏖漪荑箅轲茭邃戾骠箦ぼ历扉珙＃ぼ桄殪荇徕箅轲桨痿痨躞辨殪茔螨莒弭苠钿狲溴娼苠钿邃茕彐荏汨屙幔丙芾殒铄翥栳蜊芾筱桢磲１芾铙汨屙猁１茕彐芾筱桢磲１郏草芾铙汨屙猁１郏草茕彐芾铙汨屙幔丙芾钺蝌秣茚溴茱黹糗吏镳扉铄ぼ篝蝓簦堡茔螨茕彐苠钿筱桢磲芾箅轲芾觑芾邃扉铄苠钿邃芾钺礤溴纣筱桢磲芾钺蝌秣茚溴芾邃扉铄芾箅轲芾觑酏苠疳钿徭翦蜍戾糗泱钺礤孱潴汨屙岐苠钿泱钺礤杰孱潴汨屙茕彐茜孱溴纣芾殒铄翥栳蜊芾珏钿彐芾铉孱溴纨茕彐芾珏钿彐郏陛芾钺蝌秣茚溴茱黹荏弭怙敖荑怙ぼ篝蝓糅１荬茯灬瘥茯衢箦茕秕忪弪蹯弩屦芾麸痨轭妍荑箅轲荀浒芾麸痨轭妍茆秫褒茔螨茕彐芾铉孱溴纣芾钺蝌秣茚溴芾邃扉铄茱黹荑怙麸莒轭鬻殇翳荟蝓戾桢殓梏茕秕忪弪蹯弩屦鏖漪柢狎蜥蝓戾鏖漪芾蝓戾骈祆茔芾箅轲芾觑莒弭苠钿珏钿彐杰孱潴汨屙茕彐茚蜱蹂芾邃荛铘弪邃扉铄疱钺祠杰轭翦蜾轶痨狴扉铄疱钺祠茱疱铛疖狸雉荑犰殓麸莒轭鬻殇翳茆珧秕荏趄豸ぼ历扉珙＃ぼ桄殪荇徕箅轲桨痿痨躞辨殪荑怙麸梆酐荑篌圮历扉珙＃荃铙腴疠荇徕箅轲桨痿茔茴镝扉珙荟箅轲芾觑酏莒弭苠钿狎珲褰苠钿邃茕彐茆邈狨箦１茴镝扉珙荟箅轲荜雉Γ避泸茕彐荏铘狲芾邃芾铒箅轲荑犰殓钴忡蝻躔荏趄豸ぼ历扉珙＃ぼ桄殪荑骈欷芾扉珙＃ぼ桄殪Δ芾扉珙＃ぼ桄殪茔螨莒弭苠钿簌铘狲杰孱潸邃茕彐荛铈蝓戾芾邃芾铒箅轲荑犰殓钴忡蝻躔荏趄豸荞踽浃芾扉珙＃ぼ聃徜荑骈歃荞踽滠历扉珙＃荑骈燔泸莒弭苠钿轭骝蹯褰苠钿邃茕彐茕弪轹妍茔蜚茴镝扉珙荟箅轲芾觑酏茱黹糗历蝓戾骈祆芾殒铄翥栳蜊芾溴蜷鲥芾溴蜷鲥茕彐芾溴蜷鲥郏陛Δ荏磲箬莒秣弪爱靛荑怙ほ芑１芑荬ぼ泸茴镝扉珙荟箅轲芾觑酏茕彐芾溴蜷鲥茔茴镝扉珙荟箅轲芾觑酏茕彐芾戾狯弼盹溴荛胬轭灬忮荛钿孱苠祗遘殒李矬腴痼邈荛钿孱苠祗遘殒李镡蝈犭茜祜忉燔李镡蝈犭驷祗苠鲥蝙疳蚪茚怙鲥溟箴灬箅轲桨痿苕莛狎箅轲桨痿茴镩钿孱酏苕檐骈乞镯铒镱麇眭篝溴疳螋骝镯翳翦镦骢狍麇滹铒栳鲥翳秫簌簌礅镬骘铘狒秕溟箴矬犰族眭篝汨镲箦簌礅镬骝镯翳镣矧条汩溽骘铘麸泔眇孱筢翦骘秕祜篌俞潇翳轶礤犷铛礅弪镦泔钿轸轱钺溴骈铋糸镱螽栳鲥趄殄麸磲轭翎轭翳矧溴镦溴骈铋糸镱躞邃轭骢伯篝蜥翳弪翳犷驷泗矧翳骘铘溴疱钿孱镱弩秕舢莒弭茗灬礅溽杰灬礅溽莒弭茗眭杰眭莒弭茗骘蜥祆杰骘蜥祆莒弭茗屮轶趔杰屮轶趔茕彐茆轭茼狒栩屐莒遽潴麸茕彐茆轭潴麸茼狒栩屐莒遽潴麸芾殒疳汶徵屐镝溴潲祯汊螨茕彐莒忪雉莒犷珈妪茼脲蝾淀觖茕彐茯忪雉茼脲蝾淀觖茯犷珈妪茕彐莒忪雉莒犷珈妪茼脲蝾钞淀觖茕彐茯忪雉茼脲蝾钞淀觖茯犷珈妪莒弭莒忾钿杰焘祜莒弭茯忾钿杰蜮祜茕彐茕彐茼狒栩屐荀殇彖狒烬茕彐莛秣弪荏趄豸里瘥茆怙熹旋莒弭茔蝻篌荇轫弩茕彐莒犴怃荏趄豸里瘥茗灬礅溽茕彐茼荏趄豸里瘥茗眭芾殒疳汶徵屐镝溴潲祯汊螨茕彐莒溻蜥汶埤茼脲蝾岔觖埤茕彐茯溻蜥汶蔟茼脲蝾岔觖蔟莒弭莒忉莒溻蜥汶莒弭茯忉茯溻蜥汶莒弭茭祛彗茴彗茕彐莒铒茭祛彗芑茕彐茴彗茱鲥蜢轭妍莛栳铘镯褒茕彐莒犷茼狒栩屐荀邃珏茕彐莒矧茼狒栩屐荟邋莒弭荛眇扉弩芤殓梏狎蝻莒弭荛骀芴彐趄殓梏狎蝻茕彐苕矧犰荏趄豸里瘥茗骘蜥祆茕彐苠轶趔荏趄豸里瘥茗屮轶趔茕彐荑殇茼狒栩屐茆徙塍灬箬芾殒疳汶徵屐镝溴潲祯汊螨苣邈灬蝈歪翳御礅镬莛蝻赍泗除狎蝻黧⒎谍苣邈灬蝈歪翳御礅镬莛蝻赍泗茼狒栩屐镣俞⒈洱茕彐莛蝈茼狒栩睇痱妪芑茕彐荏屙茼狒栩屐茔镯瘕茕彐莒溽翎莒犷珈遘≤灬铉戾茕彐茯溽翎茯犷珈遘≤蜥铉戾莒弭荏栾黧荟溽箬茕彐莛轲茼狒栾蜾拒≤≤磲翳矧渚茕彐芴旁茼狒桠纣戾酏芑茕彐苌茼狒桠纣殒芑茕彐茉扰茼狒栩屐茼狒桠纣翳孱茕彐芘逃茼狒栩屐茼狒桠纣屐箦莒弭茯屐莒彐趄殓梏狎蝻茕彐茕镯茼狒栾瘥茼狒栩睇滹睚茕彐茯犷茼狒栾瘥茼狒栩睇蜥铨茕彐荛茼狒栾瘥茼狒栩睇殇芾殒疳汶徵屐镝溴潲祯汊螨茕彐茔镯瘥茼狒栩屐茯衢箦爱抖屮荑怙茱犰殓铥荑骈欹ぼ筱蜷痿筱蜷痿篝戾茼狒梵纣稞ぼ桄殪茔蜍桄殪ぼ筱蜷痿筱蜷痿篝戾茼狒梵纣过ぼ桄殪苣邈灬蝈歪翳御礅镬茕蝈簖茼狒桠轭戾趑弪簖⒉讫苣邈灬蝈歪翳御礅镬茯蝈簖茼狒桠轭戾趑弪簖⒉琵茕彐茔镯瘥茼狒桠轭茯衢箦爱跺荑怙荏磲祆茱犰殓铥荑骈欹ぼ筱蜷痿筱蜷痿篝戾茼狒栩睇稞ぼ桄殪茔蜍桄殪ぼ筱蜷痿筱蜷痿篝戾茼狒栩睇过ぼ桄殪苣邈灬蝈歪翳御礅镬茕蝈簖茼狒桠轭镣俞⒋除苣邈灬蝈歪翳御礅镬茯蝈簖茼狒桠轭镣俞⒋昌茕彐茴潋弩茼狒桠轭茯灬瘥茯衢箦暗屮荑怙き茕蝈簖茕彐茴蝌弩茼狒桠轭茯灬瘥茯衢箦暗屮荑怙き茯蝈簖茕彐荛铞捃箝睚茕彐莒轫ㄜ↑茕彐茯轫堋茕彐芾穑丙茼狒栩屐茱镝扉珙荑骈欷茼狃篝镢栳蜍黼弪淀酩荑骈燔泸ぃ堡茕彐莛骢芾疖骢铨莒弭苕躅茯殓梏狎蝻莒弭荛铌茯殓梏狎蝻黥衢芾殒疳汶徵屐镝溴潲祯汊螨苣邈灬蝈歪翳御礅镬莛轭挲除狎蝻黧⒐昌茕彐荏躜茼狒栩屐茱镝扉珙ぼ骢瞍荑骈燔泸ぼ黼弪畛眭苕躅茕彐茆殛茼狒栩屐茱镝扉珙ぼ轭辘荑骈燔泸ぼ黼弪畲眭苕躅茕彐莛轭芾疖轭挲茕彐荏躜茼狒栩屐茱镝扉珙ぼ骢瞍荑骈燔泸ぼ黼弪畲眭苕躅茕彐茆殛茼狒栩屐茱镝扉珙ぼ轭辘荑骈燔泸ぼ黼弪畹眭苕躅茕彐莛篚蜿芾疖篚蜿茕彐茴狒茆怙熹锡茕彐茴蹴茆怙熹邶茕彐茕轹茼狒桠轭茼狒梵纣溟鳊茕彐茼镤茼狒桠轭茼狒梵纣盹潺茕彐荃痿茼狒桠轭莒滹麴莒滹麴茕彐莛祯瞢茕彐荏翎蕺茕彐苕轭箦荏趄豸里瘥茆怙熹讫茕彐芾妫丙茼狒栩屐茱镝扉珙荑骈欷茼狃篝镢栳蜍黼弪稠茼狃篝镢栳蜍黼弪淀酩荑骈燔泸ぃ堡茕彐苕骢芾孳骢铨茕彐苕轭芾孳轭挲茕彐荏羼茼狒栾瘥茼狒栩睇箦颀茕彐荛箦茼狒栾瘥茼狒栩睇轶羼茕彐茔狒茼狒桠轭茯衢箦爱稿荑怙ぼ箜犰戽蝻黝茕彐苕殪翦茼狒桠轭莛蝻赍泗茕彐茕汜茼狒栾瘥茔狒茕彐茆徵茼狒栾瘥茼狒栩睇忉琮茕彐茆泔躅茼狒桠轭荏栳蝠茕彐荛钼徵茼狒栩屐茼狒栩睇轭莒弭荏踱忉珏荏耋踱箦翦茕彐茕轶觑轭茼狒梵纣溟箨镩铘芑茕彐莛狎糸糸镱茼狒栩屐茼狒梵纣疳螋轸轱铨茕彐莛蝈骈茼狒栩屐茼狒梵纣痱彐轼茕彐荏蹑骈茼狒栩屐茼狒梵纣篚骀轼茕彐荛铙羼茼狒栩屐茼狒梵纣轭茕彐苠趄徙茼狒栩屐荃痂狎痫镱戾骠茕彐荃黹铛罄簌睇荏弭怙敖荑怙ぼ沲黏茯灬瘥荑怙麸荀浒荑篌茯衢箦爱冲荑怙ぼ筱蜷痿筱蜷痿篝戾荑篌茆秫褒茕彐荃黹铛茼狒栩屐荃黹铛罄簌睚诏胖庞溴骈铋糸镱茴鬻殒荛骟栾魈徕屐荏栾魈徕屐篝蝓茕彐芴徕屐１荛骟栾魈徕屐茼怙ぼ熹狒幛墁１墁ぼ蜾狒幛苘苕辇茴鬻孱鲩蝻铐孱酐翳屣蝈睚郾蓰莛狎澡屣蝈１苒茌ㄥ钿镦翳屣蝈愆茕彐荇桢矧屙１芾殒铄翥栳蜊芾翳屣蝈睇１芾吏桢矧屙１茕彐芾翳屣蝈恚臂２蓰芾吏桢矧屙１ほ２荬茕彐芾吏桢矧屙１芾邃芾铒箅轲荑犰殓麸莒轭鬻殇翳茆珧秕荏趄豸ぼ历扉珙荑箅轲茭邃戾骠箦穑￥荑骈荇徕箅轲桨痿痨躞辨殪茔蜚荑箅轲茭邃戾骠箦疖桠秫茆翳屣蝈茯芾徕殪轸１茔蜚螨茕彐苠钿翳屣蝈睇苠钿邃茕彐莛蝻镦茔蜚荑箅轲茭邃戾骠箦疖礅秫茆痱镲纨茔蜚茴鬻殒荛骟栾鼹痱镲骟荏栾鼹痱镲骟趄蹂ゥゥ翳箬秣痱镲骟驷祗泔溴轶盹篝禊泔痖邃骝镯提翦鲥蜮狒轫ゥ翳莒弭馨篝蹑轶铄邃邃麸瘐翳殓铒蝈磲泸徭翦翳苕ゥ雉桢蝼轶翳苕珏趔殓铒蝈洹ゥ茕彐茭痱镲纣荛骟栾鼹痱镲骟芾邃芾铒箅轲莒弭莛狎杰泸茱忮扉铄筌丽镡妁箴徙弩荑犰殓麸莒轭鬻殇翳茆珧秕荏趄豸ぼ历扉珙＃ぼ桄殪荇徕箅轲桨痿痨躞辨殪茔蜚荑箅轲茭邃戾骠箦疖桠秫茆痱镲纨莒弭馨茯屐狲苠祗莒弭茕镘理犭屣翳弪茕矬疱汩犰莒弭馨荛珙矧謇痱镲苕馨茕彐苠钿痱镲纣荛骟栾鼹痱镲骟茔蜚蜍鲵蹯鏖漪璁跺桢殓梏跺溴痿璁卞碥泸泸苠珧秕黏ぼ珈镡犰芾殓铒蝈趄蹂莛狎苕辇茆彗轭珧秕茔狒泔溴帱桨茔狒泔溴噗茔狒泔溴噍讲茔狒泔溴嘬奖茔狒泔溴嘬奖茔狒泔溴嘬芙辈祜铉玟彐殓铒蝈历痱镲妫避孱潲痱镲纨埸孱溘痱镲孑孱溏蝻躔茕彐茭荔邈糸镱茯屐狲茕彐茭鲤狎孱趔茕彐茭箦泗轱睿保阐茕彐茭荔邈糸镱１茕彐茭鲤狎孱趔２荏踱箦泗轱瞠渝泗轱ぃ堡荛骧茭鲤狎孱趔苠眇豉铒疳蝈铘螬苠祗瀣疳蝈铘蠛ぃ菠苕辇茕彐苠钿箦泗轱铥荏踱箦泗轱瞠孱镦渝泗轱ぼ荔邈糸镱茕彐茭荔邈糸镱茯屐狲茕彐茭箦泗轱铕蝻镦１２茕彐茭荔邈糸镱１茕彐茭鲤狎孱趔２荏踱箦泗轱瞠序镲镦渝泗轱ぃ堡荛骧茭鲤狎孱趔苠眇豉铒痱镲疳蝈铘螬苠祗瀣痱镲疳蝈铘蠛ぃ菠苕辇茕彐苠钿箦泗轱铕蝻镦荏踱箦泗轱瞠孱镦痱镲镦渝泗轱ぼ荔邈糸镱茕彐茭荔邈糸镱茯屐狲茕彐荏钿彐１２３莛狎茴镩钿孱茆簌铘狲ぃ堡ぃ菠茕彐芾徕殪轸茯屐狲莒弭莒狒屮忮玳钴忮玳茕彐茆彗轭莒镱畿溴孳泪忾扉豉茯屐狲芾殒铄翥栳蜊茗棱彗轭莒狒屮忮玳铨茕彐茗棱彗轭郏陛莒镱畿溴孳泪忾扉豉１莒狒屮忮玳铨茴鬻泔眄犷滠庆镡犰茼怙茆珈镡犰}
\newcommand\Local{\mbox{\bf local}}

%% Margin commands
%% 
%% \+ sets the margin at the current position
%% \\ newlines and indents to margin
%% \- ends the margin.  USE ONLY BEFORE A NEWLINE GOING TO A LEFTMORE MARGIN
%%

\def\+{\vtop\bgroup\def\\{\z@nltomargin}\hbox\bgroup$}
\def\z@nltomargin{$\egroup\hbox\bgroup$}
\def\-{$\egroup\egroup}


%%
%% Object-Z style import
%%

\def\poly{\mathord\downarrow}

\def\bBigg@#1#2{%
\mbox{\ifcase#1\or\large\or\Large\or\LARGE\or\small\or\footnotesize\fi
$#2$}\nulldelimiterspace\z@ \m@th}
\addto@hook\every@math@size{\setbox\z@\vbox{\hbox{$($}\kern\z@}%
  \big@size 1.2\ht\z@}
\newdimen\big@size
\def\zBIG{\bBigg@{3}}
\def\zBig{\bBigg@{2}}
\def\zbig{\bBigg@{1}}
\def\zsmall{\bBigg@{4}}
\def\zSmall{\bBigg@{5}}
\def\atnext{\rlap{$\zSmall\bigcirc$}\kern0.01em\rlap{$\zSmall\bigcirc$}\kern0.01em\zSmall\bigcirc}
\def\atlast{\rlap{$\zSmall\bigcirc$}\kern0.01em\rlap{$\zSmall\bigcirc$}\kern0.01em\rlap{$\kern0.01em\mathord-$}\zSmall\bigcirc}
\def\always{\lower0.37ex\hbox{$\zbig\Box$}}
\def\uptilnow{\rlap{$\kern0.02em\mathord-$}\lower0.37ex\hbox{$\zbig\Box$}}
\def\eventually{\lower0.37ex\hbox{$\zbig\Diamond$}}
\def\previously{\rlap{$\kern0.04em\mathord-$}\lower0.37ex\hbox{$\zbig\Diamond$}}
\def \real  {{\bbold R}}
\def\Init{I\!\mbox{\footnotesize\emph{NIT}}}
\def\init{\z@inclasscheck\schema{\Init}}
\def\redef{\mbox{\textbf{redef}}}
\def\remov{\mbox{\textbf{remove}}}

\let\endinit\endschema

\def\oz@parbox{\@ifnextchar [{\oz@iparbox}{\oz@iparbox[c]}}
\long\def\oz@iparbox[#1]#2#3{\leavevmode \@pboxswfalse
   \if #1b\vbox
     \else \if #1t\vtop
              \else \vbox
                     %\ifmmode \vcenter \else \@pboxswtrue $\vcenter \fi
           \fi
    \fi
{\hsize #2\@parboxrestore #3}
                     %\if@pboxsw \m@th$\fi
}

%%
%%
%%

\newcount\z@stackmin
\newcount\z@stackmax
\newcount\z@stacktop
\newdimen\@gtempa \z@stackmin=\allocationnumber
\newdimen\@gtempa\newdimen\@gtempa\newdimen\@gtempa\newdimen\@gtempa
\newdimen\@gtempa\newdimen\@gtempa\newdimen\@gtempa\newdimen\@gtempa
\newdimen\@gtempa\newdimen\@gtempa\newdimen\@gtempa\newdimen\@gtempa
\newdimen\@gtempa\newdimen\@gtempa\newdimen\@gtempa\newdimen\@gtempa
\newdimen\@gtempa\newdimen\@gtempa\newdimen\@gtempa\newdimen\@gtempa
\newdimen\@gtempa\newdimen\@gtempa\newdimen\@gtempa\newdimen\@gtempa
\newdimen\@gtempa\newdimen\@gtempa\newdimen\@gtempa\newdimen\@gtempa
\newdimen\@gtempa\newdimen\@gtempa\newdimen\@gtempa\newdimen\@gtempa
\newdimen\@gtempa\newdimen\@gtempa\newdimen\@gtempa\newdimen\@gtempa
\newdimen\@gtempa\newdimen\@gtempa\newdimen\@gtempa\newdimen\@gtempa
\newdimen\@gtempa\newdimen\@gtempa\newdimen\@gtempa\newdimen\@gtempa
\newdimen\@gtempa\newdimen\@gtempa\newdimen\@gtempa\newdimen\@gtempa
\newdimen\@gtempa
\z@stackmax=\allocationnumber
\dimen\z@stackmin=0pt
\newbox\z@curline
\newdimen\z@curindent
\dimen\z@curindent=0pt
\def\z@space{{}\;{}}
\newbox\z@curfield
\def\z@startline{\setbox\z@curline\hbox{}%
     \global\z@curindent\dimen\z@stacktop
     \z@startfield\ignorespaces}
\def\z@stopline{\z@stopfield
    \z@addfield
    \hbox{\hskip\z@curindent \box\z@curline}}

\def\z@startfield{\global\setbox\z@curfield\hbox\bgroup}
\def\z@stopfield{\egroup}
\def\z@addfield{\global\setbox\z@curline\hbox{\unhbox
     \z@curline\unhbox\z@curfield}}

\def\z@pushmargin{\hbox{\kern0pt}$%
  \z@stopfield
  \z@addfield
  \ifnum \z@stacktop < \z@stackmax
    \global\advance\z@stacktop \@ne
  \else
    \@latexerr{Z margin stack overflow (too many \string\M's)}
    \@ehd
  \fi
  \global\dimen\z@stacktop\z@curindent
  \global\advance\dimen\z@stacktop \wd\z@curline
  \z@startfield\ignorespaces
  $\relax}
\def\z@popmargin{\ifnum \z@stacktop > \z@stackmin
    \global\advance\z@stacktop \m@ne \ignorespaces
  \else
    \@latexerr{Z Margin stack underflow (too many \string\O's)}
    \@ehd
  \fi}
\def\M{\z@pushmargin} \def\O{\z@popmargin} \def\S{\z@space}
\z@stacktop\z@stackmin
\newdimen\zedindent \zedindent=\leftmargini
\newdimen\zedleftsep    \zedleftsep=1em
\newdimen\zedtab    \zedtab=2em
\newdimen\zedbar    \zedbar=8em
\newdimen\zedlinethickness  \zedlinethickness=0.4pt
\newdimen\zedcornerheight   \zedcornerheight=0pt
\newcount\z@cols
\newif\ifz@firstline    \z@firstlinefalse
\newif\ifz@inclass  \z@inclassfalse
\newif\ifz@inenv    \z@inenvfalse
\newif\ifz@leftmargin   \z@leftmargintrue
\newif\ifz@incols   \z@incolsfalse
\newif\ifleftnames  \leftnamesfalse
\def\leftschemas{\leftnamestrue}
\newif\ifz@inbox    \z@inboxfalse
\newskip\zedbaselineskip    \zedbaselineskip\baselineskip
\newbox\zstrutbox   \setbox\zstrutbox=\copy\strutbox
\def\zstrut{\relax\ifmmode\copy\zstrutbox\else\unhcopy\zstrutbox\fi}
\def\zedbaselinestretch{1}
\newcount\interzedlinepenalty   \interzedlinepenalty=10000  %never break
\newcount\preboxpenalty \preboxpenalty=0    %break easily
\newcount\forcepagepenalty  \forcepagepenalty=-10000    %always break
\interdisplaylinepenalty=100    %break sometimes

%
% Code fix - doubled definition
%
%\def\zedsize#1{\def\z@size{#1}}
\def\z@size{}

\newskip\z@adskip\newskip\z@bdskip\newskip\z@adsskip\newskip\z@bdsskip
\def\z@changesize{%
\z@adskip\abovedisplayskip\z@bdskip\belowdisplayskip% save skips
\z@adsskip\abovedisplayshortskip\z@bdsskip\belowdisplayshortskip
\z@size % change size
\abovedisplayskip\z@adskip\belowdisplayskip\z@bdskip% restore skips
\abovedisplayshortskip\z@adsskip\belowdisplayshortskip\z@bdsskip}
\def\z@zeroskips{\abovedisplayskip\z@\belowdisplayskip\z@
    \abovedisplayshortskip\z@\belowdisplayshortskip\z@}
\def\z@narrow{\advance\linewidth by -\zedindent}
\def\z@wide{\advance\linewidth by \zedindent}
\def\z@hrulefill{\leaders\hrule height\zedlinethickness\hfill}
\def\z@topline#1{\omit\@ifnextchar[{\z@@topline{#1}}{\z@@topline{#1}[]}}
\def\z@@topline#1[#2]{\hbox to\linewidth{\zstrut\ifleftnames\else
    \vrule height\zedlinethickness width\zedlinethickness
    \hbox to\zedleftsep{\z@hrulefill}\fi#1\z@hrulefill
    \smash{\vrule height\zedlinethickness width\zedlinethickness
    depth\zedcornerheight}\hbox{\sf #2}}\cr}
\def\z@dbltopline#1{\omit\@ifnextchar[{\z@@dbltopline{#1}}{\z@@dbltopline{#1}[]}}
\def\z@@dbltopline#1[#2]{\z@@topline{#1}[#2]%
\noalign{\kern-\baselineskip
    \kern-\zedlinethickness
    \kern-\doublerulesep \nobreak}%
\omit\z@@topline{\hphantom{#1}}[\hphantom{#2}]%
\noalign{\kern\doublerulesep
    \kern\zedlinethickness \nobreak}}
\def\z@botline{\also\omit\hbox to\linewidth{\z@hrulefill
\smash{\vrule height\zedcornerheight width\zedlinethickness
    depth 0pt}}\cr}
\def\z@@botline[#1]{\hbox to\linewidth{\vrule\z@hrulefill\hbox{\sf\smash{#1}}}\also}
\def\zedline{\also\omit\@ifnextchar[{\z@@botline}{\z@@botline[]}}
\def\where{\also \omit \hbox to\zedbar{\z@hrulefill}\cr\also}
\let \ST    \where
\def\z@left{\ifz@inbox\vrule width\zedlinethickness\hskip\zedleftsep\fi}
\def\z@env{\global\z@firstlinetrue\z@changesize
    $$
    \z@inenvtrue
    \baselineskip\zedbaselineskip
    \parskip=0pt\lineskip=0pt\z@narrow
    \advance\displayindent by \zedindent
    \def\\{\crcr}% Must have \def and not \let for nested alignments.
    \everycr={\noalign{\ifz@firstline \global\z@firstlinefalse
    \else \penalty\interzedlinepenalty \fi}}
    \tabskip=0pt}
\def\endz@env{$$
 \global\@ignoretrue
}
\def\z@format{\halign to\linewidth\bgroup%
    \zstrut\z@left\z@startline\ignorespaces$\@lign##$\z@stopline\hfil%
    \tabskip=0pt plus1fil%
    &\hbox to 0pt{\hss\@lign##}\tabskip=0pt\cr}
\def\z@boxenv{\z@narrow\let\also=\als@ \let\Also=\Als@ \let\ALSO=\ALS@
    \z@inboxtrue \predisplaypenalty=\preboxpenalty \z@env\z@format}
\def\z@outnonbox{\z@outclasscheck\z@leavevmode\z@env}
\def\z@inoutbox{\z@leavevmode\z@makeouter\z@inclassfalse\z@boxenv}
\def\@but{\noalign{\nointerlineskip}}
\def\z@nopar{\global\@endpetrue}
\def\z@leavevmode{\ifvmode\if@inlabel\indent\else\if@noskipsec\indent\else
    \if@nobreak\global\@nobreakfalse\everypar={}\fi
    {\parskip=0pt\noindent}\fi\fi\fi}
\def\also{\crcr\noalign{\vskip\jot}}
\def\Also{\crcr\noalign{\vskip2\jot}}
\def\ALSO{\Also\Also}
\def\als@{\crcr\@but\omit\vrule height\jot width\zedlinethickness \cr \@but}
\def\Als@{\crcr\@but\omit\vrule height2\jot width\zedlinethickness \cr \@but}
\def\ALS@{\crcr\@but\omit\vrule height4\jot width\zedlinethickness \cr \@but}
\def\znewpage{\also\noalign{\penalty\forcepagepenalty}\also}
\def\zbreak{\also\noalign{\penalty\interdisplaylinepenalty\vskip-\jot}\also}
\def\Zbreak{\also\noalign{\penalty\interdisplaylinepenalty}\also}
\def\ZBREAK{\Also\noalign{\penalty\interdisplaylinepenalty}\Also}
\def\t#1{\hskip #1\zedtab}
\def\flushr#1{\crcr&#1\quad\cr}
\def\z@inclasscheck{\ifz@inclass\else
    \@latexerr{This Z environment is only allowed within a class}
{Perhaps you forgot to include a \string\begin\string{class\string}
somewhere^^Jor you are trying to print a file that needs updating.^^J\@ehc} \fi}
\def\z@outclasscheck{\ifz@inclass
    \@latexerr{This Z environment is not allowed inside a class}
{This environment doesn't really make sense within a class.^^J%
If you really want it then I'll try my best to fit in in.^^J\@ehc}\else
\ifz@inenv \@latexerr{New Z environment declared before previous
one is completed}
{I suspect that you've forgotten to finish the last environment.^^J%
You are trying to nest environments and this can only be done inside classes^^J%
besides, the environment you have started isn't valid within classes any way.^^JI suggest that you type \space X <return> \space to quit and then correct your document.}
\fi\fi}
\def\z@makeouter{%
 \ifz@inenv
   \ifz@inclass\z@inenvfalse
    \hskip-\zedleftsep \advance\linewidth by -\zedlinethickness
    \zedindent=\zedleftsep \zedleftsep=0.8\zedleftsep
    \zedbar=0.8\zedbar \zedtab=0.8\zedtab
    \oz@parbox{\linewidth}\bgroup
    \z@zeroskips
   \else
 \@latexerr{Incorrect place for Z environment; nesting is
  allowed only inside classes}
   {You've either forgotten to finish the last environment,^^J%
   you've forgotten to include a
   \string\begin\string{class\string} somewhere^^J%
   or you are trying to print a file that needs updating.^^J%
   (Then again, you might just be trying to do something^^J%
    that the author of these macros didn't intend you to do)^^J\@ehc}
   \fi
 \else
   \bgroup
 \fi
}
\def \z@makeinner{\egroup
   \global\z@curindent\z@
}
\def \classbreak{\also\egroup$$\vskip -\ht\zstrutbox
    \vskip -\abovedisplayskip\vskip -\belowdisplayskip\z@wide\z@boxenv\also}
\def\zed{\z@outnonbox\z@inboxfalse\z@format}
\def\endzed{\crcr\egroup\endz@env}
\let\[=\zed
\def\]{\crcr\egroup$$\ignorespaces}
\def\argue{\z@outnonbox\interzedlinepenalty=\interdisplaylinepenalty
    \openup 1\jot \z@format
    \noalign{\vskip-\jot}}% equal vspace above and below argue display
\let\endargue=\endzed
\def\infrule{\z@outnonbox\halign\bgroup
    \zstrut\quad$\@lign##$\quad\hfil&\quad\@lign##\hfil\cr}
\let\endinfrule=\endzed
\def\derive{\crcr\also\@but\omit\z@hrulefill%
    \@ifnextchar[{\z@sidecondition}{\cr\also\@but}}
\def\Derive{\crcr\also\@but\omit\z@hrulefill\cr\@but
    \noalign{\kern-\dp\zstrutbox
    \kern\doublerulesep \nobreak}%
\omit\derive}
\def\z@sidecondition[#1]{&$\smash{\lower 0.2ex\hbox{$[\;#1\;]$}}$\cr\also\@but}
\def\syntax{\z@outnonbox\halign\bgroup
    \zstrut$\@lign##$\hfil &\hfil$\@lign{}##{}$\hfil
    &$\@lign##$\hfil &\qquad\@lign-- ##\hfil\cr}
\let\endsyntax=\endzed
\def\ozschema#1{\z@inoutbox\z@topline{$\,#1\,$}}
\def\endozschema{\z@botline \endzed \z@makeinner \z@nopar}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\@namedef{anonschema}{\leftnamesfalse\z@inoutbox\z@topline{}}
\expandafter\let\csname endanonschema\endcsname=\endozschema
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\def\genschema#1#2{\z@inoutbox\z@topline{$\,#1\:[#2]\,$}}
\let\endgenschema=\endozschema

%
% axdef renamed to ozaxdef
%
\def\ozaxdef{\z@inoutbox}
\def\endozaxdef{\endzed\z@makeinner}

\def\uniqdef{\leftnamesfalse\z@inoutbox\z@dbltopline{}}
\let\enduniqdef=\endozschema
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\def\gendef{\@ifnextchar[{\z@gendef}{\z@@gendef}}
%\def\z@gendef[#1]{\leftnamesfalse\z@inoutbox\z@dbltopline{$\,[#1]\,$}}
%\def\z@@gendef#1{\leftnamesfalse\z@inoutbox\z@dbltopline{$\,[#1]\,$}}
%\let\endgendef=\endozschema
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\def\gengendef{\@ifnextchar[{\z@gengendef}{\z@@gengendef}}
\def\z@gengendef[#1]{\leftnamesfalse\z@inoutbox\z@dbltopline{$\,#1\,$}}
\def\z@@gengendef#1{\leftnamesfalse\z@inoutbox\z@dbltopline{$\,#1\,$}}
\let\endgengendef=\endozschema
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\def\class#1{\z@leavevmode\z@makeouter\z@inclasstrue
    \z@boxenv\z@topline{$\,#1\,$}}
\let\endclass\endozschema
\def\op{\z@inclasscheck\ozschema}
\let\endop\endozschema

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\def\state{\z@inclasscheck\vbox\bgroup\vskip-\ht\zstrutbox\vbox\bgroup\hbox\bgroup\@nameuse{anonschema}}
\def\endstate{\endozschema\egroup\egroup\egroup}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\def\init{\z@inclasscheck\ozschema{\Init}}
\let\endinit\endozschema

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\let\const\ozaxdef
\let\endconst\endozaxdef
\def\type{\z@inclasscheck}
\let\endtype\relax
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\def\sidebyside{\@ifnextchar[{\z@columns}{\z@columns[2]}}
\def\z@columns[#1]{\z@leavevmode\z@cols#1 \z@makeouter\z@narrow%
    $$\lineskip=0pt\z@incolstrue
    \predisplaysize\maxdimen
    \ifz@leftmargin\hskip-\zedindent\z@leftmarginfalse\fi
    \setbox0=\hbox to \linewidth\bgroup\z@zeroskips%
    \divide\zedbar by \z@cols \divide\zedleftsep by \z@cols
    \divide\zedtab by \z@cols \divide\linewidth by \z@cols
   \oz@parbox[t]{\linewidth}\bgroup\z@wide}
\def\nextside{\egroup\hss\oz@parbox[t]{\linewidth}\bgroup\z@wide}
\newdimen\z@temp
\def\endsidebyside{\egroup\egroup
    \z@temp\ht0 \advance\z@temp by \dp0\advance\z@temp by-\dp\zstrutbox
    \hbox{\raise\z@temp\box0}\endz@env\z@makeinner\z@nopar}
\def\zpar{\z@leavevmode
    \ifz@inenv\z@inclasstrue\fi% fudge to let zpar in all boxes
    \z@makeouter\z@changesize
    \advance\linewidth by -\z@curindent
    \advance\linewidth by -\wd\z@curline
    \hskip-\wd\z@curline\advance\linewidth by -\zedindent$$
    \ifz@leftmargin\hskip-\zedindent\fi% adjustment for first column
    \advance\displayindent by \zedindent
    \advance\displaywidth by -\zedindent
    \advance\displayindent by \z@curindent
    \advance\displayindent by \wd\z@curline
    \advance\displaywidth by -\z@curindent
    \advance\displaywidth by -\wd\z@curline
    \global\setbox\z@curline\hbox{}
    \z@narrow\oz@parbox[b]{\linewidth}\bgroup\hfil\break}
\def\endzpar{\egroup$$\z@makeinner\z@nopar}
\def \classcom{\zpar\sf}
\let \endclasscom=\endzpar
\def\proof{\zpar$\PR$\zpar}
\def\endproof{\endzpar\endzpar}
\def\zseq#1{\lseq #1 \rseq}
\def\zset#1{\{ #1 \}}
\def\zimg#1{\limg #1 \rimg}
\def\zsch#1{\lsch #1 \rsch}
\def\zimgset#1{\zimg\zset{#1}}
